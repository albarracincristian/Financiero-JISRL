<!DOCTYPE html>

<html lang="es">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Operaciones - Aplicación</title>
<link href="assets/favicon-32x32.png" rel="icon" type="image/png"/>
<link href="assets/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/>
<link href="assets/apple-touch-icon.png" rel="apple-touch-icon"/>
<link href="styles.css" rel="stylesheet"/>
<meta content="light dark" name="color-scheme"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="Panel de operaciones con tarjetas organizadas" name="description"/>
<script defer="" src="vendor/xlsx.full.min.js"></script>
<script defer="" src="script.js"></script>
</head>
<body>
<nav>
<ul>
<li><a href="index.html">Panel</a></li>
<li><a href="flujo-caja.html">Tesorería</a></li>
<li><a href="input.html">Operaciones</a></li>
<li><a href="data-entry.html">Presupuesto Mensual</a></li>
<li><a href="feriados.html">Calendario Laboral</a></li>
</ul>
</nav>
<section id="input">
<h2>Operaciones</h2>
<p>Panel de operaciones: organizamos en tarjetas para luego completar cálculos y lógica.</p>
<div class="cards-grid">
<div class="card" id="op-objetivo-stock">
<h3>Objetivo y Stock</h3>
<div class="kv">
<label for="op-dias-cobertura">Días objetivo de cobertura (días)</label>
<input id="op-dias-cobertura" placeholder="16" type="number"/>
<label for="op-objetivo-retiro">Objetivo Retiro (Tn)</label>
<input id="op-objetivo-retiro" placeholder="3,5" step="0.1" type="number"/>
<label for="op-stock-actual">Stock actual (ton)</label>
<input id="op-stock-actual" placeholder="3,514" step="0.001" type="number"/>
<label for="op-tn-retiradas">Tn Retiradas a la fecha</label>
<input id="op-tn-retiradas" placeholder="1,00" step="0.01" type="number"/>
<label class="muted">Días stock en piso</label>
<input placeholder="19,1" step="0.1" type="number"/>
<label class="muted">Stock al cierre (tn)</label>
<input placeholder="-0,2" step="0.1" type="number"/>
<label class="muted">Stock ideal (ton)</label>
<input placeholder="2,9" step="0.1" type="number"/>
</div>
</div>
<div class="card emphasis" id="op-brecha-stock">
<h3>Brecha a Stock ideal</h3>
<div class="kv">
<label class="muted">Falta recuperar stock KG ideal</label>
<input placeholder="-3,112507143" readonly="" type="text"/>
<label class="muted">(ARS) Retiro faltante a stock ideal</label>
<input placeholder="-$ 72.020.747" readonly="" type="text"/>
<label class="muted">Tn vs Obj + Stock ideal</label>
<input placeholder="-5,61" readonly="" type="text"/>
<label class="muted">(ARS) Retiro faltante vs OBJ</label>
<input placeholder="-$ 84.120.618,44" readonly="" type="text"/>
</div>
</div>
<div class="card" id="op-periodo">
<h3>Período y días</h3>
<div class="kv">
<label for="op-fecha-inicio">Fecha inicio</label>
<input id="op-fecha-inicio" type="date"/>
<label for="op-fecha-fin">Fecha fin</label>
<input id="op-fecha-fin" type="date"/>
<label class="muted">Días trabajados</label>
<input placeholder="6" type="number"/>
<label class="muted">Días laborales</label>
<input placeholder="26" type="number"/>
<label class="muted">Días restantes</label>
<input placeholder="20" type="number"/>
<label class="muted">Tn a vender (días restantes)</label>
<input placeholder="3,68" type="number"/>
<label for="op-capacidad-equipo">Capacidad por equipo (ton)</label>
<input id="op-capacidad-equipo" placeholder="2,7" step="0.1" type="number"/>
<label for="op-peso-lunes">Peso Lunes</label>
<input id="op-peso-lunes" placeholder="21" step="0.1" type="number"/>
<label for="op-peso-martes">Peso Martes</label>
<input id="op-peso-martes" placeholder="21" step="0.1" type="number"/>
<label for="op-peso-miercoles">Peso Miércoles</label>
<input id="op-peso-miercoles" placeholder="21" step="0.1" type="number"/>
<label for="op-peso-jueves">Peso Jueves</label>
<input id="op-peso-jueves" placeholder="20" step="0.1" type="number"/>
<label for="op-peso-viernes">Peso Viernes</label>
<input id="op-peso-viernes" placeholder="10" step="0.1" type="number"/>
<label for="op-peso-sabado">Peso Sábado</label>
<input id="op-peso-sabado" placeholder="7" step="0.1" type="number"/>
<label for="op-peso-domingo">Peso Domingo</label>
<input id="op-peso-domingo" placeholder="0" step="0.1" type="number"/>
<label for="op-nc-monto">NC monto (+)</label>
<input id="op-nc-monto" placeholder="$ 5.700.000,00" type="text"/>
</div>
</div>
<div class="card" id="op-parametros">
<h3>Parámetros</h3>
<table class="mini-table">
<thead><tr><th>Parámetro</th><th class="right">Valor</th></tr></thead>
<tbody>
<tr><td>KG/Lts base mensual (prom KG/Lts_Mensual)</td><td class="param-value right" data-format="decimal" data-param="kg_lts_base">–</td></tr>
<tr><td>ARS base mensual (prom ARS_Mensual)</td><td class="param-value right" data-format="currency" data-param="ars_base">–</td></tr>
<tr><td>Sueldos + F931 (prom)</td><td class="param-value right" data-format="currency" data-param="sueldos">–</td></tr>
<tr><td>SICORE</td><td class="param-value right" data-format="currency" data-param="sicore">–</td></tr>
<tr><td>Servicios</td><td class="param-value right" data-format="currency" data-param="servicios">–</td></tr>
<tr><td>Honorarios</td><td class="param-value right" data-format="currency" data-param="honorarios">–</td></tr>
<tr><td>Gastos Generales</td><td class="param-value right" data-format="currency" data-param="generales">–</td></tr>
<tr><td>IIBB / Percepciones</td><td class="param-value right" data-format="currency" data-param="iibb">–</td></tr>
<tr><td>Otros (prom)</td><td class="param-value right" data-format="currency" data-param="otros">–</td></tr>
<tr><td>Imp. Ganancias</td><td class="param-value right" data-format="currency" data-param="ganancias">–</td></tr>
<tr><td>Imp. IVA</td><td class="param-value right" data-format="currency" data-param="iva">–</td></tr>
<tr><td>Combustible 1era Quincena</td><td class="param-value right" data-format="currency" data-param="combustible_q1">–</td></tr>
<tr><td>Combustible 2da Quincena</td><td class="param-value right" data-format="currency" data-param="combustible_q2">–</td></tr>
<tr><td>Seguros</td><td class="param-value right" data-format="currency" data-param="seguros">–</td></tr>
<tr><td>Rentas Patentes Automotor</td><td class="param-value right" data-format="currency" data-param="rentas">–</td></tr>
<tr><td>Recaudación diaria estimada (ARS)</td><td class="param-value right" data-format="currency" data-param="recaudacion_diaria">–</td></tr>
</tbody>
</table>
</div>
<div class="card" id="op-fechas">
<h3>Fechas calculadas</h3>
<table class="mini-table" id="op-fechas-table">
<thead><tr><th>Concepto</th><th>Fecha</th><th>Mes Sig</th></tr></thead>
<tbody id="op-fechas-body"></tbody>
</table>
</div>
<div class="card" id="op-variables">
<h3>Variables</h3>
<table class="mini-table">
<thead><tr><th>Variable</th><th class="right">Valor</th></tr></thead>
<tbody>
<tr><td>Lead time L (días) Camión Completo</td><td class="right">5</td></tr>
<tr><td>Lead time L (días) Camión Parcial</td><td class="right">10</td></tr>
<tr><td>Ventas diarias promedio (ton/día)</td><td class="right">0,18</td></tr>
<tr><td>Desvío estándar ventas diarias (ton/día)</td><td class="right">0,045</td></tr>
<tr><td>Término de pago (días) Cta Cte proveedor</td><td class="right">14</td></tr>
<tr><td>Días de recaudación para cubrir 1 equipo</td><td class="right">8,5</td></tr>
<tr><td><strong>Cobertura por equipo (días)</strong></td><td class="right"><strong>14,7</strong></td></tr>
</tbody>
</table>
</div>
</div>
</section>


<script>\nfunction formatValue(value, fmt) {\n  if (value == null || Number.isNaN(value)) return '–';\n  const opts = fmt === 'decimal'\n    ? { minimumFractionDigits: 2, maximumFractionDigits: 2 }\n    : fmt === 'currency'\n      ? { style: 'currency', currency: 'ARS', minimumFractionDigits: 0, maximumFractionDigits: 0 }\n      : { minimumFractionDigits: 0, maximumFractionDigits: 0 };\n  return new Intl.NumberFormat('es-AR', opts).format(value);\n}\n\nfunction populateParametros(payload) {\n  const entries = payload?.inputs?.parameter_table || [];\n  const index = Object.create(null);\n  entries.forEach(item => { if (item?.key) index[item.key] = item; });\n  document.querySelectorAll('.param-value').forEach(cell => {\n    const key = cell.dataset.param;\n    if (!key) return;\n    const entry = index[key];\n    const fmt = cell.dataset.format || entry?.format || 'currency';\n    const value = entry?.value ?? null;\n    cell.textContent = formatValue(value, fmt);\n  });\n}\n\nasync function fetchFinanciero() {\n  try {\n    const res = await fetch('data/financiero.json', { cache: 'no-store' });\n    if (!res.ok) throw new Error(`HTTP ${res.status}`);\n    const data = await res.json();\n    populateParametros(data);\n    return data;\n  } catch (err) {\n    console.warn('No se pudo cargar datos de financiamiento', err);\n    return null;\n  }\n}\n\nwindow.addEventListener('load', function(){\n  if (window.FINANCIERO_DATA) {\n    populateParametros(window.FINANCIERO_DATA);\n  }\n  fetchFinanciero();\n});\n</script>\n</body>\n</html>









